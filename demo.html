<!DOCTYPE html>
<html lang="en">
<head>
<title>Ego Energy DEMO</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- Default style css -->
<style>
  body,h1,h2,h3,h4,h5,h6 {font-family: "Lato", sans-serif}
  .w3-bar,h1,button {font-family: "Montserrat", sans-serif}
  .fa-anchor,.fa-coffee {font-size:200px}
</style>

<!-- Accordion css -->
<style>
  .accordion {
    background-color: #eee;
    color: #444;
    cursor: pointer;
    padding: 18px;
    width: 100%;
    border: none;
    text-align: left;
    outline: none;
    font-size: 15px;
    transition: 0.4s;
  }
  .active, .accordion:hover {
    background-color: #ccc;
  }
  .accordion:after {
    content: '\002B';
    color: #777;
    font-weight: bold;
    float: right;
    margin-left: 5px;
  }
  .active:after {
    content: "\2212";
  }
  .panel {
    margin: 10px;
    padding: 0 18px;
    background-color: white;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.2s ease-out;
  }
</style>

<!-- Button css -->
<style>
  .button {
    background-color: #f44336;
    border: none;
    color: white;
    padding: 5px 12px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
    border-radius: 50%;
  }

  .plus {float: left;}
  .minus {float: right;}
  .trash {border-radius: 8px;}
  .info {border-radius: 12px;}
</style>

<!-- Dropdown css -->
<style>
  .dropdown {
    float: left;
    overflow: hidden;
  }
  .dropdown .dropbtn {
    cursor: pointer;
    font-size: 16px;  
    border: none;
    outline: none;
    /* color: white; */
    padding: 14px 16px;
    background-color: inherit;
    font-family: inherit;
    margin: 0;
  }
  .dropdown-content {
    display: none;
    /* position: absolute; */
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    /* z-index: 1; */
    height: auto;
    
    overflow: scroll;
    min-height: fit-content;
    max-height: 250px;
  }
  .dropdown-content a {
    float: none;
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    text-align: left;
  }
  .dropdown-content a:hover {
    background-color: #ddd;
  }
  .show {
    display: block;
  }
</style>

<!-- Nutrition label css -->
<style>
  .image {
    width: 250px;
    float: left;
    margin: 20px;
  }
  body {
    font-size: small;
    line-height: 1.4;
  }
  p {
    margin: 0;
  }
  .performance-facts {
    border: 1px solid black;
    margin: auto;
    /* float: left; */
    width: 280px;
    padding: 0.5rem;
    table {
      border-collapse: collapse;
    }
  }
  .performance-facts__title {
    font-weight: bold;
    font-size: 2rem;
    margin: 0 0 0.25rem 0;
  }
  .performance-facts__header {
    border-bottom: 10px solid black;
    padding: 0 0 0.25rem 0;
    margin: 0 0 0.5rem 0;
    p {
      margin: 0;
    }
  }
  .performance-facts__table {
    width: 100%;
    thead tr {
      th,
      td {
        border: 0;
      }
    }
    th,
    td {
      font-weight: normal;
      text-align: left;
      padding: 0.25rem 0;
      border-top: 1px solid black;
      white-space: nowrap;
    }
    td {
      &:last-child {
        text-align: right;
      }
    }
    .blank-cell {
      width: 1rem;
      border-top: 0;
    }
    .thick-row {
      th,
      td {
        border-top-width: 5px;
      }
    }
  }
  .small-info {
    font-size: 0.7rem;
  }
  .performance-facts__table--small {
    @extend .performance-facts__table;
    border-bottom: 1px solid #999;
    margin: 0 0 0.5rem 0;
    thead {
      tr {
        border-bottom: 1px solid black;
      }
    }
    td {
      &:last-child {
        text-align: left;
      }
    }
    th,
    td {
      border: 0;
      padding: 0;
    }
  }
  .performance-facts__table--grid {
    @extend .performance-facts__table;
    margin: 0 0 0.5rem 0;
    td {
      &:last-child {
        text-align: left;
        &::before {
          content: "â€¢";
          font-weight: bold;
          margin: 0 0.25rem 0 0;
        }
      }
    }
  }
  .text-center {
    text-align: center;
  }
  .thick-end {
    border-bottom: 10px solid black;
  }
  .thin-end {
    border-bottom: 1px solid black;
  }
</style>

<!-- Search css -->
<style>
  .topnav {
    overflow: hidden;
    background-color: #e9e9e9;
  }
  .topnav a {
    float: left;
    display: block;
    color: black;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
    font-size: 17px;
  }
  .topnav a:hover {
    background-color: #ddd;
    color: black;
  }
  .topnav a.active {
    background-color: #2196F3;
    color: white;
  }
  .topnav .search-container {
    float: right;
  }
  .topnav input[type=text] {
    padding: 6px;
    margin-top: 8px;
    font-size: 17px;
    border: none;
  }
  .topnav .search-container button {
    float: right;
    padding: 6px 10px;
    margin-top: 8px;
    margin-right: 16px;
    background: #ddd;
    font-size: 17px;
    border: none;
    cursor: pointer;
  }
  .topnav .search-container button:hover {
    background: #ccc;
  }
  @media screen and (max-width: 600px) {
    .topnav .search-container {
      float: none;
    }
    .topnav a, .topnav input[type=text], .topnav .search-container button {
      float: none;
      display: block;
      text-align: left;
      width: 100%;
      margin: 0;
      padding: 14px;
    }
    .topnav input[type=text] {
      border: 1px solid #ccc;  
    }
  }
</style>

<!-- Slider css -->
<style>
  .slider {
    -webkit-appearance: none;
    width: 100%;
    height: 15px;
    border-radius: 5px;  
    background: #d3d3d3;
    outline: none;
    /* opacity: 0.7; */
    -webkit-transition: .2s;
    transition: opacity .2s;

    margin-top: 12px;
  }

  .slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 25px;
    height: 25px;
    border-radius: 50%; 
    background: #f44336;
    cursor: pointer;
  }

  .slider::-moz-range-thumb {
    width: 25px;
    height: 25px;
    border-radius: 50%;
    background: #f44336;
    cursor: pointer;
  }
</style>

<!-- Misc css -->
<style>
  .listed_supplement{
    font-size:large;
    display: inline;
  }
  .full-width{
    width: 100%;
  }
  .show-all{
    /* overflow: scroll; */
    min-height: fit-content;
    /* max-height: fit-content; */
    /* max-height: 250px; */
  }
  .fa-check{
    float: right;
    display: none;
  }
  .w3-half{
    /* defined like this for mobile */
    width: 50%;
  }
  .w3-quarter{
    /* defined like this for mobile */
    width: 25%;
  }
  .editor_supplement{
    border: 1px solid #cccccc;
    /* padding: 1px; */
    border-radius: 10px;
  }
</style>

</head>

<body>

<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-red w3-card w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-red" href="javascript:void(0);" onclick="hamburger()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
    <a href="/index.html" class="w3-bar-item w3-button w3-padding-large w3-hover-white">Home</a>
    <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-white">Demo</a>
  </div>

  <!-- Navbar on small screens -->
  <div id="navDemo" class="w3-bar-block w3-white w3-hide w3-hide-large w3-hide-medium w3-large">
    <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 1</a>
    <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 2</a>
    <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 3</a>
    <a href="#" class="w3-bar-item w3-button w3-padding-large">Link 4</a>
  </div>
</div>

<!-- Header -->
<header class="w3-container w3-red w3-center" style="padding:64px 16px">
  <h1 class="w3-margin w3-xlarge">Ego Energy Demo</h1>
  <!-- <p class="w3-xlarge">Preworkout by Yous</p> -->
  <!-- <button class="w3-button w3-black w3-padding-large w3-large w3-margin-top">Demo</button> -->
</header>

<!-- Main -->
<div class="w3-row-padding w3-padding-64 w3-container">
  <div class="w3-content">

      <!-- Search -->
      <button class="accordion">Search</button>
      <div class="panel" id="panel_search">
        <!-- <p>this is where the search bar goes</p> -->
        <div class="dropdown full-width">
          <input type="text" id="search_input" class="dropbtn search-container full-width" onclick="populate_searchbar_content()" onkeyup="search_function()" placeholder="Search.."></input>
          <div class="dropdown-content dropbtn" id="searchbar_content"></div>
        </div> 
      </div>

<!-- Editor -->
      <button class="accordion">Editor</button>
      <div class="panel" id="panel_editor">
        <p>this is where the editor goes</p>
        <div id="editor_user_mix" class="show-all"></div>
      </div>

<!-- Nutrition Label -->
      <button class="accordion">Nutrition Label</button>
      <div class="panel show-all">
        <section class="performance-facts">
          <header class="performance-facts__header">
            <h1 class="performance-facts__title">Nutrition Facts</h1>
            <p id="serving_size">Serving Size: 1 scoop</p>
            <span id="serving_per_container">Serving Per Container: </span>
            <input type="radio" id="spc30" name="spc" onclick=get_total() value="30" checked>
            <label for="spc1">30</label>
            <input type="radio" id="spc60" name="spc" onclick=get_total() value="60">
            <label for="spc2">60</label>
            <input type="radio" id="spc90" name="spc" onclick=get_total() value="90">
            <label for="spc3">90</label><br>
          </header>
          <table class="performance-facts__table">
            <thead>
              <tr>
                <th colspan="3" class="small-info">
                  Amount Per Serving
                </th>
                <th colspan="3" class="small-info">
                  <b>% Daily Value*</b>
                </th>
              </tr>
            </thead>
            <tbody id="nutrition_fact_table" class="show-all"></tbody>
          </table>
          <p class="small-info">* Percent Daily Values are based on a 2,000 calorie diet. Your daily values may be higher or lower depending on your calorie needs:</p>
          <p class="small-info">** Percent Daily Values not established</p>estimate
        </section>
      </div>
      
<!-- Estimate -->      
      <button class="accordion">Estimate</button>
      <div class="panel">
        <p>this is where the estimate goes</p>
      </div>

    </div>
  </div>
</div>

<!-- <div class="w3-container w3-black w3-center w3-opacity w3-padding-64">
    <h1 class="w3-margin w3-xlarge">Quote of the day: live life</h1>
</div> -->

<!-- Footer -->
<footer class="w3-container w3-padding-64 w3-center w3-opacity">  
  <div class="w3-xlarge w3-padding-32">
    <i class="fa fa-facebook-official w3-hover-opacity"></i>
    <i class="fa fa-instagram w3-hover-opacity"></i>
    <i class="fa fa-snapchat w3-hover-opacity"></i>
    <i class="fa fa-pinterest-p w3-hover-opacity"></i>
    <i class="fa fa-twitter w3-hover-opacity"></i>
    <i class="fa fa-linkedin w3-hover-opacity"></i>
 </div>
 <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
</footer>


<!-- Hamburger script -->
<script>
// Used to toggle the menu on small screens when clicking on the menu button
  function hamburger() {
    var x = document.getElementById("navDemo");
    if (x.className.indexOf("w3-show") == -1) {
      x.className += " w3-show";
    } else { 
      x.className = x.className.replace(" w3-show", "");
    }
  }
</script>

<!-- Accordion script -->
<script>
  var acc = document.getElementsByClassName("accordion");
  var i;
  
  for (i = 0; i < acc.length; i++) {
    acc[i].addEventListener("click", function() {
      this.classList.toggle("active");
      var panel = this.nextElementSibling;
      if (panel.style.maxHeight) {
        panel.style.maxHeight = null;
      } 
      else {
        // if (panel.id=="panel_search" || panel.id=="panel_editor") {
          panel.style.maxHeight = "fit-content";
        // }
        // else {
        //   panel.style.maxHeight = panel.scrollHeight + "px";
        // }
      } 
    });
  }
</script>

<!-- add_editor_elements -->
<script>

  // initialize
  function add_editor_element(supplement) {
    var content = document.createElement("div");
    content.setAttribute("id", supplement.name);
    content.classList.add("w3-row");
    content.classList.add("w3-container");
    content.classList.add("editor_supplement");
    document.getElementById("editor_user_mix").appendChild(content);
    create_editor_element_info(supplement);
    create_editor_element_ui(supplement);
  }

  // info
  function create_editor_element_label(supplement) {
    let q = document.createElement("p");
    q.classList.add("w3-quarter");
    q.id=supplement.name.concat("_editor_information");
    q.textContent=supplement.propername;
    document.getElementById(supplement.name).appendChild(q);
  }
  function create_editor_element_qty(supplement){
    let q = document.createElement("p");
    q.id=supplement.name.concat("_label_qty");
    q.textContent="Unit qty: " + supplement.qty + " " + supplement.dose_unit;
    document.getElementById(supplement.name).firstChild.appendChild(q);
  }
  function create_editor_element_cost(supplement){
    let q = document.createElement("p");
    q.id=supplement.name.concat("_label_cost");
    q.textContent="Unit cost: " + supplement.cost_per_unit + " " + supplement.cost_unit;
    document.getElementById(supplement.name).firstChild.appendChild(q);
  }
  function create_editor_element_total(supplement){
    let q = document.createElement("p");
    q.id=supplement.name.concat("_label_unittotal");
    q.textContent="Unit total: $" + Number((supplement.qty*supplement.cost_per_unit)).toFixed(2);
    document.getElementById(supplement.name).firstChild.appendChild(q);
  }

  // ui
  function create_editor_element_slider(supplement){
    
    let slider_container = document.createElement("div");
    slider_container.classList.add("w3-quarter");

    let x = document.createElement("INPUT");
    x.classList.add("slider");
    x.setAttribute("type", "range");
    x.setAttribute("name", supplement.name);
    x.setAttribute("min", "0");
    x.setAttribute("value", supplement.qty);
    x.setAttribute("max", supplement.max);
    x.setAttribute("step", supplement.step);
    x.setAttribute("id", supplement.name.concat("_slider"));
    x.oninput = function(){
      supplement.qty = Number(this.value);
      update_numbers(supplement);
    }
    slider_container.append(x);
    return slider_container;
  }
  function create_button_element_minus(supplement){
    let minus_container = document.createElement("div");
    minus_container.classList.add("w3-quarter");

    let minus_button = document.createElement("BUTTON");
    minus_button.classList.add('button');
    minus_button.classList.add('minus');
    minus_button.textContent = " - ";
    minus_button.onclick = function(){
      if (supplement.qty == 0){
        return
      }
      else{
        supplement.qty=supplement.qty-supplement.step;
        document.getElementById(supplement.name.concat("_slider")).value=supplement.qty;
      }  
      update_numbers(supplement);
    };
    minus_container.append(minus_button);
    return minus_container;

  }
  function create_button_element_plus(supplement){
    let plus_container = document.createElement("div");
    plus_container.classList.add("w3-quarter");

    let plus_button = document.createElement("BUTTON");
    plus_button.classList.add('button');
    plus_button.classList.add('plus');
    plus_button.textContent = " + ";
    plus_button.onclick = function(){
      if (supplement.qty == document.getElementById(supplement.name.concat("_slider")).max){
        return
      }
      else{
        supplement.qty ++;
        document.getElementById(supplement.name.concat("_slider")).value=supplement.qty;
      }
      
      update_numbers(supplement);
    };
    plus_container.append(plus_button);
    return plus_container;
  }

  function create_button_element_trash(supplement){

    let ui_container = document.getElementById(supplement.name.concat("_editor_ui"));
    // name_container = supplement.name;
    // console.log(supplement);
    let innerhtml_string = "<i class='fa fa-trash' aria-hidden='true' onclick='remove_supplement()'></i>";
    console.log(innerhtml_string);
    let trash_button = document.createElement("BUTTON");
    trash_button.classList.add('button');
    // trash_button.innerHTML="<i class='fa fa-trash' aria-hidden='true'></i>";
    trash_button.innerHTML = innerhtml_string;
    // trash_button.onclick = function(supplement){
      // console.log("trash clicked");
    //   console.log(supplement);
      // remove_supplement(supplement);
    // };

    ui_container.lastChild.append(trash_button);

  }
  
  // populate editor
  function create_editor_element_info(supplement){
    create_editor_element_label(supplement);
    create_editor_element_qty(supplement);
    create_editor_element_cost(supplement);
    create_editor_element_total(supplement);
  }
  function create_editor_element_ui(supplement){
    var content = document.createElement("div");
    content.id=supplement.name.concat("_editor_ui");
    document.getElementById(supplement.name).appendChild(content);
    document.getElementById(supplement.name).lastChild.appendChild(create_button_element_minus(supplement));
    document.getElementById(supplement.name).lastChild.appendChild(create_editor_element_slider(supplement));
    document.getElementById(supplement.name).lastChild.appendChild(create_button_element_plus(supplement));
    create_button_element_trash(supplement)
  }
</script>

<!-- add_nutrition_label_elements -->
<script>
  function add_nutrition_element(supplement) {
    var table = document.getElementById("nutrition_fact_table");
    var row = table.insertRow(0);
    var qty_percent = row.insertCell(0);
    var qty_mass = row.insertCell(0);
    var nutrient = row.insertCell(0);
    
    row.className = "nutrient";
    row.id=supplement.name.concat("_nutrient_fact");
    nutrient.setAttribute("colspan","2");
    qty_mass.setAttribute("id", supplement.name.concat("_mass_qty"));
    qty_percent.setAttribute("id", supplement.name.concat("_percent_qty"));
    
    nutrient.textContent = supplement.propername;
    qty_mass.textContent = supplement.qty;

    nan_check = (supplement.qty / supplement.dv) * 100;
    if (isNaN(nan_check)){
      qty_percent.textContent = "N/A*";

    }
    else{
      qty_percent.textContent = String(nan_check.toFixed(0));
    }
    
    qty_percent.className = "text-right";
    qty_mass.className = "text-right";
}
</script>

<!-- populate_nutrition_label -->
<script>
  function populate_nutrition_label(){
    
    //depopulate nutrition table
    trash = document.getElementById("nutrition_fact_table");
    cull = trash.children.length;
    if(trash.children){
      for(i=0;i<cull;i++){
        trash.childNodes[0].remove();
      }
    }

    //repopulate nutrition table
    let list = sort_nutrition_elements();
    let otherlist = [];

    for(i=0;i<list.length;i++){
      let supplement = supplement_data.find(x=>x.name===list[i].id);
      otherlist.push(supplement); //this reverses the list to ascending
    }
    // console.log(otherlist);

    for(i=0;i<otherlist.length;i++){
      add_nutrition_element(otherlist[i]);
    }
  }
</script>

<!-- sort_nutrition_elements -->
<script>
  function sort_nutrition_elements(){
    // a=document.getElementById("editor_user_mix");
    let arr=Array.from(document.getElementById("editor_user_mix").children);
    arr.sort(function(a, b) {
        
    // sort in an descending order
      if (a.id > b.id) {
        return -1;
      }
      if (a.id < b.id) {
        return 1;
      }
      // names must be equal
      return 0;
    });
    // console.log(arr);
    return(arr);
  }
</script>

<!-- Papaparse script -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.2/papaparse.min.js"></script>
<script>
  /*
  Pull data from csv file
  Uses PapaParse to parse data.csv into arrays for the webpage to use
  */
  var supplement_data = [];

  Papa.parse('data.csv',{
    header: true,
    newline: "\n",
    delimiter: ",",
    quoteChar: '"',
    dynamicTyping: true,
    download: true,

    complete: function(results){
      for (let i=0;i<results.data.length;i++){
        supplement_data.push(results.data[i]);
        }
      }
    });
</script>

<!-- result_added_check_check -->
<script>
  function result_added_check_check(){

    user_list = document.getElementById("editor_user_mix").childNodes;
    length = user_list.length;
    for (i=0;i<length;i++){
      temp_id = user_list[i].id.concat("_searchbar_check");
      document.getElementById(temp_id).style = "display: block";;
    }
  }
</script>

<!-- remove supplement -->
<script>
  function remove_supplement(supplement){
    console.log("remove_supplement called");
    // document.getElementById(supplement+"_searchbar_check").style="display: none";
    // document.getElementById("editor_user_mix").children[i].remove();
    // document.getElementById(supplement+"_nutrient_fact").remove();
  }
</script>

<!-- searchbar_results -->
<script>
  /* When the user clicks on the button, 
  toggle between hiding and showing the dropdown content */
  function populate_searchbar_content() {
    document.getElementById("searchbar_content").classList.toggle("show");
    var y;
    let i;

    // populate supplement list; results are filtered through search script
    for (i=0; i<=(supplement_data.length-1); i++) {
      if (i==0){
        y = "<a class='listed_supplement dropbtn' onclick=searchbar_supplement_onclick('"+ supplement_data[i].name +"')>" + supplement_data[i].propername;
        y = y + "<i class='fa fa-check fa-1' id='"+supplement_data[i].name+"_searchbar_check' aria-hidden='true'></i></a>";
      }
      else{
        y = y + "<a class='listed_supplement dropbtn' onclick=searchbar_supplement_onclick('"+ supplement_data[i].name +"')>" + supplement_data[i].propername;
        y = y + "<i class='fa fa-check fa-1' id='"+supplement_data[i].name+"_searchbar_check' aria-hidden='true'></i></a>";      
      }
    }
    
    document.getElementById("searchbar_content").innerHTML = y;
    result_added_check_check();
    document.getElementById("panel_search").style.height=document.getElementById("searchbar_content").clientHeight + 50 + "px";
  }
  
  // Close the dropdown if the user clicks outside of it
  window.onclick = function(e) {
    if (!e.target.matches('.dropbtn')) {
    var searchbar_content = document.getElementById("searchbar_content");
      if (searchbar_content.classList.contains('show')) {
        searchbar_content.classList.remove('show');
      }
    }
    document.getElementById("panel_search").style.height=document.getElementById("searchbar_content").clientHeight + 50 + "px";
  }
</script>

<!-- searchbar_filter -->
<script>
  function search_function() {
    let input, filter, ul, li, a, i, p;
    input = document.getElementById("search_input");
    filter = input.value.toUpperCase();
    div = document.getElementById("searchbar_content");
    a = div.getElementsByTagName("a");
    for (i = 0; i < a.length; i++) {
      txtValue = a[i].textContent || a[i].innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        a[i].style.display = "";
      } else {
        a[i].style.display = "none";
      }
    }
    document.getElementById("panel_search").style.height=document.getElementById("searchbar_content").clientHeight + 50 + "px";
  }
</script>

<!-- searchbar_supplement_onclick -->
<script>
  // First checks if anything is on the editor list.
  // If nothing is on the list, then we add
  // If something is on the list, we check if it's the same
  // If object is the same, we remove it (toggle)
  // If it's not the same, then we add

function searchbar_supplement_onclick(xyz){
  var do_we_add = false;

  // If nothing is on the list, then we add
  if (!document.getElementById("editor_user_mix").firstChild){
    do_we_add = true;
  }

  // If something is on the list, we check if it's the same
  // if object is the same, we remove it
  else{
    length = document.getElementById("editor_user_mix").children.length
    for (i=0; i<length; i++){
      if (xyz==document.getElementById("editor_user_mix").children[i].id){
        //remove supplement
        do_we_add = false;
        remove_supplement(xyz);
        break;
      }
      else{
        do_we_add = true;
      }
    }
  }
  result_added_check_check();
  if(do_we_add){
    var supplement = supplement_data.find(x=>x.name===xyz);
    document.getElementById(xyz+"_searchbar_check").style="display: block";
    add_editor_element(supplement);
    populate_nutrition_label();
    result_added_check_check();
  }
}

</script>


<!-- update numbers -->
<script>
  function update_numbers(supplement) {
    let qty = Number(supplement.qty).toFixed(2);
    let unittotal = Number(supplement.qty*supplement.cost_per_unit).toFixed(2);

    let y = document.getElementById(supplement.name.concat("_label_qty"));
    y.textContent = "Unit qty: " + String(qty).concat(" ").concat(supplement.dose_unit);
    
    let z = document.getElementById(supplement.name.concat("_label_unittotal"));
    z.textContent = "Unit total: $" + String(unittotal);

    // z = document.getElementById(supplement.name.concat("_mass_qty"));
    // z.innerHTML = String(x).concat(" ").concat(supplement.unit);
    
    // v = document.getElementById(supplement.name.concat("_cart_label_qty"));
    // v.innerHTML = String(x);

    // w = document.getElementById(supplement.name.concat("_percent_qty"));
    // if (supplement.unit == "mg"){
    //   nan_check = ((supplement.qty / supplement.dv)/1000) * 100;
    // }
    // else{
    //   nan_check = (supplement.qty / supplement.dv) * 100;
    // }

    // if (isNaN(nan_check)){
    //   w.innerHTML = "N/A**";
    // }
    // else{
    //   w.innerHTML = String(nan_check.toFixed(0)).concat(" %");
    // }
    
    // u = document.getElementById(supplement.name.concat("_subtotal"));
    // u.innerHTML = (x * supplement.price).toFixed(2);
}
</script>

</body>
</html>